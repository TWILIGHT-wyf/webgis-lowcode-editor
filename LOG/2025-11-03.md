### 1.子元素填充父元素（css）

#### 1.绝对定位：

子绝父相 inset：0

#### 2.百分比：

父元素要有明确尺寸，且不考虑边距

#### 3.Flex/Grid：

flex：1 或 grid-area: 1 / 1 / -1 / -1

### 2.el-input-number

#### 1.formatter影响显示

#### 2.parser影响解析

#### 3.precision保留的小数位数

#### 4.step

### 3. 视口（Viewport）原理

- 坐标系：Client(事件坐标) → Local(容器内) → World(数据/舞台)。
- 变换：world → local = world \* scale + offset；local → world = (local − offset) / scale。
- 平移：offset += Δclient。
- 以指针缩放（zoomAt）：保持指针处 world 坐标不变
  - worldp = (localp − offset) / oldScale
  - offset' = localp − worldp \* newScale
- 夹取：scale = clamp(scale, minScale, maxScale)。
- 适配视口（fitToView）：s = min((viewW−2p)/stageW, (viewH−2p)/stageH)。

### 4. 画布分层（两层 vs 三层）

- 两层：viewport(固定窗口, overflow:hidden) + stage(舞台, transform: translate+scale)。可行，简单。
- 三层（推荐）：
  1.  canvas-wrap：position: relative; width/height: 100%; overflow: hidden; 作为定位与视觉边界。
  2.  content（视口层）：position: absolute; inset: 0; 绑定事件（wheel/pointer）。
  3.  stage（舞台层）：position: absolute; left: 0; top: 0; 应用 transform；内部渲染网格与节点。
- 外壳作用：提供定位基准、裁剪边界、背景与事件隔离。

### 5. 网格背景实现（CSS）

- 子元素充满父元素：父相(`position:relative`)，子绝(`position:absolute; inset:0;`)。
- 网格：
  - background: repeating-linear-gradient(90deg, rgba(0,0,0,0.04) 0 1px, transparent 1px 8px),
    repeating-linear-gradient(0deg, rgba(0,0,0,0.04) 0 1px, transparent 1px 8px);
  - 放在 `.grid-canvas{ pointer-events:none; }`，作为 stage 的第一层子元素。

### 6. el-input-number 百分比输入

- formatter(value): 影响显示（例：1 → "100%"）。
- parser(value): 影响解析（例："50%" → 0.5）。
- precision: 保留小数位（与 step 对齐，避免浮点误差）。
- 示例：formatter: v => `${(v*100).toFixed(0)}%`；parser: s => parseFloat(s.replace('%',''))/100。

### 7. Pinia 数学方法（夹取）

- Math.floor(x)：向下取整。
- Math.max(a,b)/Math.min(a,b)：取较大/较小值。
- 夹取（钳制）：Math.min(max, Math.max(min, s))，保证值在区间 [min,max] 内。
- 用途：尺寸至少为 1；缩放限制在 [0.2, 4]。

### 8. computed 使用场景

- 适合：从多个源派生只读展示值；昂贵计算的缓存；get/set 适配 v-model（需要写回时）。
- 不适合：副作用/异步/事件处理；以及需要函数签名的 prop（如 el-input-number 的 formatter/parser 应传函数，不是 computed 值）。
- 对比：ref=原始可写状态；computed=派生值（可带 setter）；watch=副作用。

### 9. 滚动条的来源与处理

- 来源：舞台尺寸大于容器且父容器 overflow: auto；或普通流布局导致撑开容器。
- 处理：el-main 设 overflow:hidden；stage 绝对定位 + transform 平移缩放；用视口变换代替 DOM 滚动。
